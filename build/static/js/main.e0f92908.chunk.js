(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{159:function(e,t,n){},160:function(e,t,n){},161:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(46),o=n.n(r),i=n(0);var s={colors:{text:"white",background:"#161A30",backgroundSecondary:"#262F4D",muted:"#fff",modes:{light:{text:"#262F4D",background:"white",backgroundSecondary:"white",muted:"#444"},dark:{text:"white",background:"#161A30",backgroundSecondary:"#262F4D",muted:"#fff"}}}},l=n(4),u=n.n(l),b=n(8),d=n(5);n(57);var p=()=>{const e=Object(i.d)(),t=Object(d.a)(e,2),c=t[0],a=t[1];return Object(i.c)("button",{className:"toggler",onClick:()=>a("light"===c?"dark":"light")},Object(i.c)("div",{sx:{color:"text"}},"light"===c?Object(i.c)("img",{width:"20px",src:n(58),alt:"dark"}):Object(i.c)("img",{width:"20px",src:n(59),alt:"light"})))};var m=()=>Object(i.c)("header",{sx:{bg:"backgroundSecondary"}},Object(i.c)("h1",{className:"logo-text",sx:{color:"text"}},Object(i.c)("img",{src:n(60),alt:"logo"}),"smart irrigation"),Object(i.c)(p,null));n(61);var f=e=>Object(i.c)("div",{sx:{bg:"backgroundSecondary"},className:"card"},e.title?Object(i.c)("div",null,Object(i.c)("h2",null,e.title,Object(i.c)("div",{className:"separator"}))):Object(i.c)("div",null),e.body);n(62);var j=e=>{const t=e.sensorInFocus,a=Object(c.useState)(!1),r=Object(d.a)(a,2),o=r[0],s=r[1],l=()=>{s(!0),fetch("".concat("http://192.168.55.14:3000","/sensors/irrigation/").concat(t)).then(e=>e.json()).then(function(){var e=Object(b.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s(!1);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),e=>{console.log("Coudn't fetch data. Error: ".concat(e))})};return Object(i.c)("div",{className:"iot-button"},Object(i.c)("button",{sx:{background:!1===o?"linear-gradient(90deg, #598bff, #3366FF)":"grey"},onClick:()=>l()},!1===o?Object(i.c)("img",{width:"40px",src:n(63),alt:"dark"}):Object(i.c)("div",{id:"loading"})),Object(i.c)("h3",{sx:{color:"text",marginLeft:"12px",lineHeight:"23px"}},"Start Manual Irrigation ",Object(i.c)("br",null),!1===o?"OFF":"ON"))},g=n(49);n(159);var O=e=>{const t=e.sensorInFocus,n=Object(i.e)(),r=a.a.createRef(),o=Object(c.useState)("day"),s=Object(d.a)(o,2),l=s[0],p=s[1],m=Object(c.useState)({labels:[],datasets:[{label:"Irrigation",fill:!0,data:[],borderWidth:2,backgroundColor:"rgba(4, 214, 144, 0.1)",borderColor:"rgba(4, 214, 143, 1)"}]}),f=Object(d.a)(m,2),j=f[0],O=f[1],v={responsive:!0,maintainAspectRatio:!1,animation:{duration:300,easing:"linear"},elements:{point:{radius:0}},scales:{yAxes:[{ticks:{fontColor:n.theme.colors.text,maxTicksLimit:10},id:"y-axis-0",position:"left"}],xAxes:[{gridLines:{display:!1},ticks:{fontColor:n.theme.colors.text,maxTicksLimit:4,maxRotation:0,minRotation:0,callback:function(e){return"minute"===l?new Date(e).toLocaleTimeString("en",{second:"numeric"})+"s":"hour"===l?new Date(e).toLocaleTimeString("en",{minute:"numeric"})+"min":"day"===l?new Date(e).toLocaleTimeString("en",{hour:"numeric"}):"week"===l?new Date(e).toLocaleDateString("en",{day:"numeric",month:"short"}):void 0}}}]},legend:{display:!1},tooltips:{enabled:!1}};Object(c.useEffect)(()=>{const e=()=>{fetch("".concat("http://192.168.55.14:3000","/measurements/").concat(l,"/").concat(t)).then(e=>e.json()).then(function(){var e=Object(b.a)(u.a.mark(function e(t){var n,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.map(e=>e.timestamp),c=t.map(e=>1e5/e.capacity),O({labels:n,datasets:[{fill:!0,data:c,borderWidth:2,backgroundColor:"rgba(4, 214, 144, 0.1)",borderColor:"rgba(4, 214, 143, 1)"}]});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),e=>{console.log("Coudn't fetch data. Error: ".concat(e))})};e();const n=setInterval(()=>{e()},1e3);return()=>clearInterval(n)},[O,l,t]);return Object(i.c)("div",{className:"line-chart"},Object(i.c)("select",{sx:{color:"text"},onChange:e=>(e=>{p(e)})(e.target.value),className:"chart-drop-down",value:l},Object(i.c)("option",{value:"minute"},"Last Minute"),Object(i.c)("option",{value:"hour"},"Last Hour"),Object(i.c)("option",{value:"day"},"Last Day"),Object(i.c)("option",{value:"week"},"Last Week")),j.dataset?Object(i.c)("div",null):Object(i.c)(g.a,{ref:r,data:j,options:v}))},v=n(2);n(160);var h=e=>{const t=e.sensorInFocus,n=Object(c.useState)({minIrrigationIntervalInMinutes:0,irrigationTimeInSeconds:0,capacityBuffer:0,signalPin:0}),a=Object(d.a)(n,2),r=a[0],o=a[1],s=Object(c.useState)({minIrrigationIntervalInMinutes:0,irrigationTimeInSeconds:0,capacityBuffer:0,signalPin:0}),l=Object(d.a)(s,2),p=l[0],m=l[1];Object(c.useEffect)(()=>{t&&fetch("".concat("http://192.168.55.14:3000","/preferences/").concat(t)).then(e=>e.json()).then(function(){var e=Object(b.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m(Object(v.a)(Object(v.a)({},t),{},{capacityBuffer:parseInt(1e5/t.capacityBuffer)})),o(Object(v.a)(Object(v.a)({},t),{},{capacityBuffer:parseInt(1e5/t.capacityBuffer)}));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),e=>{console.log("Coudn't fetch data. Error: ".concat(e))})},[o,t]);const f=(e,n)=>{fetch("".concat("http://192.168.55.14:3000","/preferences/").concat(t),{headers:{"Content-Type":"application/json"},method:"PUT",body:JSON.stringify(Object(v.a)(Object(v.a)({},r),{},{capacityBuffer:parseInt(1e5/r.capacityBuffer)}))}).then(e=>e.json()).then(function(){var e=Object(b.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m(Object(v.a)(Object(v.a)({},t),{},{capacityBuffer:parseInt(1e5/t.capacityBuffer)}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),e=>{console.log("Coudn't fetch data. Error: ".concat(e))})},j=e=>r[e]===p[e]?"#161A30 !important":"var(--primary) !important";return Object(i.c)("h3",{sx:{color:"text"}},Object(i.c)("div",{className:"preference"},Object(i.c)("h3",null,"Irrigation time [s]:"),Object(i.c)("input",{sx:{color:"text",borderColor:j("irrigationTimeInSeconds")},type:"number",onChange:e=>o(Object(v.a)(Object(v.a)({},r),{},{irrigationTimeInSeconds:parseInt(e.target.value)})),value:r.irrigationTimeInSeconds})),Object(i.c)("div",{className:"preference"},Object(i.c)("h3",null,"Minimum irrigation time interval [min]:"),Object(i.c)("input",{sx:{color:"text",background:"inherit",borderColor:j("capacityBuffer"),borderRadius:"10px"},type:"number",onChange:e=>o(Object(v.a)(Object(v.a)({},r),{},{minIrrigationIntervalInMinutes:parseInt(e.target.value)})),value:r.minIrrigationIntervalInMinutes})),Object(i.c)("div",{className:"preference"},Object(i.c)("h3",null,"Minimum soil moisture:"),Object(i.c)("input",{sx:{color:"text",borderColor:j("capacityBuffer")},type:"number",onChange:e=>o(Object(v.a)(Object(v.a)({},r),{},{capacityBuffer:parseInt(e.target.value)})),value:r.capacityBuffer})),Object(i.c)("div",{className:"preference"},Object(i.c)("h3",null,"Irrigation starts:"),Object(i.c)("select",{sx:{color:"text",borderColor:j("signalPin"),borderRadius:"10px",background:"inherit"},type:"number",onChange:e=>o(Object(v.a)(Object(v.a)({},r),{},{irrigationTimeStart:e.target.value})),value:r.irrigationTimeStart},[...Array(24).keys()].map(e=>Object(i.c)("option",{key:e,value:"".concat(e+1,":00")},"".concat(e+1,":00"))))),Object(i.c)("div",{className:"preference"},Object(i.c)("h3",null,"Irrigation ends:"),Object(i.c)("select",{sx:{color:"text",borderColor:j("signalPin"),borderRadius:"10px",background:"inherit"},type:"number",onChange:e=>o(Object(v.a)(Object(v.a)({},r),{},{irrigationTimeEnd:e.target.value})),value:r.irrigationTimeEnd},[...Array(24).keys()].map(e=>Object(i.c)("option",{key:e,value:"".concat(e+1,":00")},"".concat(e+1,":00"))))),Object(i.c)("div",{className:"preference"},Object(i.c)("h3",null,"Signal Pin:"),Object(i.c)("input",{sx:{color:"text",borderColor:j("signalPin")},type:"number",onChange:e=>o(Object(v.a)(Object(v.a)({},r),{},{signalPin:parseInt(e.target.value)})),value:r.signalPin})),Object(i.c)("div",{className:"preference"},Object(i.c)("div",null),Object(i.c)("button",{sx:{color:"text",borderColor:JSON.stringify({minIrrigationIntervalInMinutes:r.minIrrigationIntervalInMinutes,irrigationTimeInSeconds:r.irrigationTimeInSeconds,capacityBuffer:r.capacityBuffer,signalPin:r.signalPin})===JSON.stringify({minIrrigationIntervalInMinutes:p.minIrrigationIntervalInMinutes,irrigationTimeInSeconds:p.irrigationTimeInSeconds,capacityBuffer:p.capacityBuffer,signalPin:p.signalPin})?"#161A30 !important":"var(--primary) !important"},onClick:()=>f()},"Submit")))};n(161);var y=e=>Object(i.c)("div",{className:"sensorPicker ",sx:{display:e.sensors.length>1?"flex":"none"}},e.sensors.map(t=>Object(i.c)("div",{key:t,onClick:()=>e.setSensorInFocus(t),sx:{bg:t===e.sensorInFocus?"var( --primary) !important":"backgroundSecondary"},className:"card"},Object(i.c)("h4",null,t))));n(162);var x=()=>{const e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(),o=Object(d.a)(r,2),s=o[0],l=o[1];Object(c.useEffect)(()=>{p()},[a]);const p=()=>{fetch("".concat("http://192.168.55.14:3000","/sensors")).then(e=>e.json()).then(function(){var e=Object(b.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a(t),l(t[0]);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),e=>{console.log("Coudn't fetch data. Error: ".concat(e))})};return Object(i.c)("div",null,Object(i.c)(m,null),Object(i.c)("div",{className:"main"},Object(i.c)("div",{className:"container row"},Object(i.c)("div",{className:"col-12"},Object(i.c)(y,{sensors:n,setSensorInFocus:l,sensorInFocus:s})),Object(i.c)("div",{className:"col-md-12"},Object(i.c)(f,{title:"Statistics",body:Object(i.c)(O,{sensorInFocus:s})})),Object(i.c)("div",{className:"col-md-6"},Object(i.c)(f,{title:"Preferences",body:Object(i.c)(h,{sensorInFocus:s})})),Object(i.c)("div",{className:"col-md-6"},Object(i.c)(f,{body:Object(i.c)(j,{sensorInFocus:s})})))))};function I(){return a.a.createElement(i.b,{theme:s},a.a.createElement(i.a,null),a.a.createElement(x,null))}const k=document.getElementById("root");o.a.render(a.a.createElement(I,null),k)},51:function(e,t,n){e.exports=n(163)},57:function(e,t,n){},58:function(e,t,n){e.exports=n.p+"static/media/moon.5e028c86.svg"},59:function(e,t,n){e.exports=n.p+"static/media/sun.0e45b318.svg"},60:function(e,t,n){e.exports=n.p+"static/media/logo.0d0b1f3c.svg"},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){e.exports=n.p+"static/media/watering.ee32fdea.svg"}},[[51,1,2]]]);
//# sourceMappingURL=main.e0f92908.chunk.js.map